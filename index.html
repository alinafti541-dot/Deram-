<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù…ÙØ³Ø± Ø§Ù„Ø£Ø­Ù„Ø§Ù… - ØªÙØ³ÙŠØ± Ø§Ø¨Ù† Ø³ÙŠØ±ÙŠÙ† ÙˆØ§Ù„Ù†Ø§Ø¨Ù„Ø³ÙŠ</title>

  <!-- Ø®Ø·ÙˆØ· -->
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;600;700;800&family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --sky: #7bd3ff;
      --sky-dark: #4baaec;
      --deep: #0b2e4a;
      --gold: #d4af37;
      --bg: #f6fbff;
      --card: #ffffff;
      --border: rgba(0,0,0,.08);
      --text: #0b1b2b;
      --muted: #345;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; padding: 0; font-family: 'Tajawal', system-ui, sans-serif; background: linear-gradient(135deg, #e9f6ff 0%, #f7fbff 60%, #eaf4ff 100%); color: var(--text); }

    /* Ø±Ø£Ø³ ØªÙ†ÙÙŠØ°ÙŠ Ù…Ø¹ Ù…Ø³Ø§Ø­Ø© Ø¥Ø¹Ù„Ø§Ù† 90px Ø«Ø§Ø¨ØªØ© */
    header.app-header {
      background: linear-gradient(135deg, var(--sky) 0%, #89d4ff 60%, #a6d0ff 100%);
      color: #0b1b2b;
      border-bottom: 1px solid rgba(0,0,0,.08);
      padding: 12px 16px;
      position: sticky;
      top: 0;
      z-index: 50;
      box-shadow: 0 2px 8px rgba(0,0,0,.05);
    }
    header.app-header .brand {
      display: flex; align-items: center; justify-content: space-between;
      max-width: 1100px; margin: 0 auto;
    }
    .logo {
      display: flex; align-items: center; gap: 12px;
    }
    .logo .mark {
      width: 40px; height: 40px; border-radius: 8px;
      background: white; display: grid; place-items: center;
      box-shadow: 0 2px 6px rgba(0,0,0,.15);
      font-weight: 700; color: var(--deep);
    }
    .title {
      font-family: 'Amiri', serif;
      font-size: 28px; font-weight: 700; letter-spacing: .2px;
      margin: 0;
    }
    .subtitle {
      font-family: 'Tajawal', sans-serif;
      font-size: 12px; opacity: .8;
    }

    /* Ø¥Ø¹Ù„Ø§Ù† Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© (90px) */
    .ad-slot {
      height: 90px; display: flex; align-items: center; justify-content: center;
      background: rgba(255,255,255,.6);
      border-bottom: 1px solid var(--border);
    }
    .ad-slot > span {
      font-family: 'Tajawal', sans-serif; font-size: 14px; color: #1a2c4a;
    }

    /* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
    main.container {
      max-width: 1100px; margin: 28px auto; padding: 0 16px;
    }

    /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ÙØ®Ù…Ø© */
    .search-panel {
      display: grid; gap: 14px; grid-template-columns: 1fr;
      align-items: center; justify-items: stretch;
      padding: 18px; border-radius: 14px;
      background: linear-gradient(135deg, #ffffff 0%, #f1fbff 100%);
      border: 1px solid var(--border);
      box-shadow: 0 6px 18px rgba(0,0,0,.05);
    }
    .search-panel .row { display: grid; grid-template-columns: 1fr auto; gap: 12px; align-items: center; }

    .input-wrap {
      display: flex; gap: 8px; align-items: center;
      background: #fff; border: 1px solid var(--border);
      border-radius: 12px; padding: 8px 12px;
      box-shadow: inset 0 1px 2px rgba(0,0,0,.04);
    }
    .input-wrap input {
      width: 100%; border: none; outline: none; font-family: 'Tajawal', sans-serif;
      font-size: 16px; color: var(--text);
    }
    .btn {
      display: inline-flex; align-items: center; justify-content: center;
      gap: 8px; padding: 12px 18px; border-radius: 12px;
      border: none; cursor: pointer;
      background: linear-gradient(135deg, var(--sky) 0%, #7ab8ff 100%);
      color: #003056; font-family: 'Amiri', serif; font-size: 16px;
      font-weight: 700;
      box-shadow: 0 6px 14px rgba(0,0,0,.12);
    }
    .btn:disabled {
      opacity: .6; cursor: not-allowed;
    }

    .loader {
      width: 20px; height: 20px; border: 3px solid rgba(0,0,0,.15);
      border-top-color: #003056; border-radius: 50%; animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ±Ø§Ø«ÙŠ */
    .result-card {
      margin-top: 20px; padding: 22px; border-radius: 14px;
      border: 1px solid var(--border);
      background: linear-gradient(135deg, #fff 0%, #fbfbff 100%);
      box-shadow: 0 6px 22px rgba(0,0,0,.04);
      font-family: 'Amiri', serif; line-height: 1.9;
    }
    .result-title { font-family: 'Amiri', serif; font-size: 28px; margin: 0 0 8px; color: #0b2e4a; }
    .result-meta { font-family: 'Tajawal', sans-serif; font-size: 12px; color: #5a6b80; margin-bottom: 12px; }
    .result-content { font-size: 18px; color: #102a43; }

    /*å“åº”/Ø¬ÙˆØ§Ù„*/
    @media (max-width: 900px){
      .title { font-size: 26px; }
      .result-title { font-size: 24px; }
      .search-panel { padding: 14px; }
      .row { grid-template-columns: 1fr; }
      .btn { width: 100%; }
    }
  </style>
</head>
<body>

  <!-- Ù…Ø³Ø§Ø­Ø© Ø¥Ø¹Ù„Ø§Ù† Ø¹Ù„ÙˆÙŠØ© Ø«Ø§Ø¨ØªØ© 90px -->
  <header class="app-header" aria-label="Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø©">
    <div class="ad-slot" aria-label="Ø¥Ø¹Ù„Ø§Ù† Ø¹Ù„ÙˆÙ‰">
      <span>Ø¥Ø¹Ù„Ø§Ù†: Ù…Ø³Ø§Ø­Ø© Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© 90px â€” Ù…ÙˆÙÙ‘Ø±Ø© Ù„ÙƒØŸ</span>
    </div>

    <div class="brand" style="max-width:1100px;margin:0 auto; padding: 8px 0;">
      <div class="logo">
        <div class="mark" aria-label="Ø´Ø¹Ø§Ø±">Ø£Ø±</div>
        <div>
          <h1 class="title" style="margin:0;">Ù…ÙØ³Ø± Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø§Ù„Ù…Ù„ÙƒÙŠ</h1>
          <div class="subtitle">ØªÙØ³ÙŠØ± Ø£Ø­Ù„Ø§Ù…Ùƒ ÙˆÙÙ‚ Ù…Ù†Ù‡Ø¬ Ø§Ø¨Ù† Ø³ÙŠØ±ÙŠÙ† ÙˆØ§Ù„Ù†Ø§Ø¨Ù„Ø³ÙŠ Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø£Ø¯Ø¨ÙŠ Ø±ÙÙŠØ¹</div>
        </div>
      </div>
      <!-- Ù…Ø³Ø§Ø­Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù…Ø«Ù„ Ù‚Ø§Ø¦Ù…Ø©/Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù‡Ù†Ø§ -->
    </div>
  </header>

  <main class="container" role="main">

    <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø­Ø« -->
    <section class="search-panel" aria-label="ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªÙØ³ÙŠØ±">
      <div class="row" style="align-items:center;">
        <div class="input-wrap" style="flex:1;">
          <span aria-hidden="true" style="color:#2b6cb0;">ğŸ”</span>
          <input id="dream-input" type="text" placeholder="Ø§ÙƒØªØ¨ Ø­Ù„Ù…Ùƒ Ù‡Ù†Ø§ Ø«Ù… Ø§Ø¶ØºØ· Ø§Ø³ØªÙ†Ø¨Ø§Ø· Ø§Ù„ØªÙØ³ÙŠØ±..." inputmode="text" />
        </div>
        <button id="infer-btn" class="btn" type="button" aria-label="Ø§Ø³ØªÙ†Ø¨Ø§Ø· Ø§Ù„ØªÙØ³ÙŠØ±">
          Ø§Ø³ØªÙ†Ø¨Ø§Ø· Ø§Ù„ØªÙØ³ÙŠØ±
        </button>
      </div>
      <div id="status" style="min-height:20px; color:#2b3a54; font-family:'Tajawal', sans-serif; font-size:14px;"></div>
    </section>

    <!-- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ±Ø§Ø«ÙŠ -->
    <section id="result-area" class="result-card" aria-label="Ø§Ù„Ù†ØªÙŠØ¬Ø©">
      <h2 class="result-title" style="display:none;" id="result-title">ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù…</h2>
      <div class="result-meta" id="result-meta" style="display:none;">
        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…ÙŠØªØ§ ØªÙˆØ¶Ø¹ Ù‡Ù†Ø§ -->
      </div>
      <div class="result-content" id="result-content" style="display:none;">
        <!-- Ø§Ù„ØªÙØ³ÙŠØ± Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
      </div>
    </section>
  </main>

  <script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©
    const API_KEY = "AIzaSyAtEHesVMCKGwzPbHI1TKoNZZI7JyNBJEQ"; // Ø¶Ø¹ Ù…ÙØªØ§Ø­ API Ù‡Ù†Ø§ Ø¨Ø´ÙƒÙ„ Ø¢Ù…Ù† ÙÙŠ Ø¨ÙŠØ¦Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©
    const MODEL = "gemini-1.5-flash";

    const input = document.getElementById('dream-input');
    const btn   = document.getElementById('infer-btn');
    const statusEl = document.getElementById('status');
    const resTitle = document.getElementById('result-title');
    const resMeta  = document.getElementById('result-meta');
    const resBody  = document.getElementById('result-content');
    const resultArea = document.getElementById('result-area');

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø®ÙÙŠØ© Ø­ØªÙ‰ ØªØ¨Ø¯Ø£ Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬
    function clearResult() {
      resTitle.style.display = 'none';
      resMeta.style.display = 'none';
      resBody.style.display = 'none';
      resBody.innerHTML = '';
    }Ø²
    clearResult();

    // Ø¥Ù†Ø´Ø§Ø¡ Loader DOM
    function showLoader() {
      const loader = document.createElement('span');
      loader.className = 'loader';
      loader.setAttribute('aria-label','Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©');
      return loader;
    }

    // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Google AI Studio
    async function fetchInterpretation(prompt) {
      // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨ ÙˆÙÙ‚ ØªÙ†Ø³ÙŠÙ‚ Google AI Studio REST (Ø§Ø¹ØªÙ…Ø§Ø¯Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ gemini-1.5-flash)
      // Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù€ endpoint ÙˆÙÙ‚ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ.
      // Ù‡Ø°Ø§ Ø§Ù„Ù…Ø«Ø§Ù„ ÙŠÙˆØ¶Ø­ Ø¨Ù†ÙŠØ© Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ POST.
      const endpoint = `https://API.AI.STUDIO/v1/models/${MODEL}:predict`;

      // Ø¬Ø³Ù… Ø§Ù„Ø·Ù„Ø¨
      const body = {
        apiKey: API_KEY,
        prompt: prompt,
        parameters: {
          // Ø­Ø³Ø¨ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ØŒ Ø£Ø¶Ù Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©
        }
      };

      // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø¯
      try {
        const resp = await fetch(endpoint, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(body)
        });

        if (!resp.ok) {
          const text = await resp.text();
          throw new Error(`ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„: ${resp.status} ${resp.statusText} - ${text}`);
        }
        const data = await resp.json();
        // ÙŠØ¹ØªÙ…Ø¯ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙØ¹Ù„ÙŠØ§Ù‹
        // Ø§ÙØªØ±Ø¶ Ø£Ù† Ø§Ù„Ù†Øµ ØªÙØ³ÙŠØ± ÙÙŠ data.choices[0].text Ø£Ùˆ data.predictions[0].output Ø­Ø³Ø¨ Ø§Ù„ØªÙˆØ«ÙŠÙ‚
        const text = extractPrediction(data);
        return text;
      } catch (err) {
        throw err;
      }
    }

    // Ù…Ø³ØªØ®Ø±Ø¬ Ù…Ø¨Ø³Ø· Ù…Ù† Ø¨Ù†ÙŠØ© Ø§Ù„Ø±Ø¯ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©
    function extractPrediction(data) {
      // Ù‡Ø°Ù‡ Ù…Ø¬Ø±Ø¯ ÙØ±Ø¶ÙŠØ©Ø› Ø¹Ø¯Ù‘Ù„Ù‡Ø§ ÙˆÙÙ‚ Ø§Ù„Ø±Ø¯ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù…Ù† API
      // Ù…Ø«Ø§Ù„: data.choices[0].text
      if (data && data.choices && data.choices.length > 0 && data.choices[0].text) {
        return data.choices[0].text.trim();
      }
      // Ù…Ø«Ø§Ù„ Ø¨Ø¯ÙŠÙ„:
      if (data && data.predictions && data.predictions.length > 0 && data.predictions[0].output) {
        return data.predictions[0].output.trim();
      }
      // ÙØ´Ù„ Ø§Ø³ØªØ®Ø±Ø§Ø¬
      return "ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø±Ø¯ØŒ Ù„ÙƒÙ† Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ØªÙØ³ÙŠØ± Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.";
    }

    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªÙØ³ÙŠØ±
    async function handleInfer() {
      const userInput = input.value.trim();
      if (!userInput) {
        alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø­Ù„Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø§Ù„Ø§Ø³ØªÙ†Ø¨Ø§Ø·.');
        return;
      }

      // Ø¥Ø¹Ø¯Ø§Ø¯ Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„Ø©
      clearResult();
      statusEl.textContent = 'Ø¬Ø§Ø±Ù ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù…...';
      const loader = showLoader();

      // Ø¥Ø¶Ø§ÙØ© Loader Ø¥Ù„Ù‰ Ù…ÙƒØ§Ù† Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      resultArea.appendChild(loader);

      // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨ ÙˆÙÙ‚ Ù…Ù†Ù‡Ø¬ Ø§Ø¨Ù† Ø³ÙŠØ±ÙŠÙ† ÙˆØ§Ù„Ù†Ø§Ø¨Ù„Ø³ÙŠ Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø£Ø¯Ø¨ÙŠ
      const prompt = `
      Ø£Ù†Øª Ù…ÙØ³Ø± Ø£Ø­Ù„Ø§Ù… Ø®Ø¨ÙŠØ± ÙˆÙ…ÙˆÙ‚Ø±. Ø¨Ø´ÙƒÙ„ Ø£Ø¯Ø¨ÙŠ Ø±ÙÙŠØ¹ØŒ ØªÙØ³Ø± Ø§Ù„Ø­Ù„Ù… Ø§Ù„ØªØ§Ù„ÙŠ ÙˆÙÙ‚ Ù…Ù†Ù‡Ø¬ Ø§Ø¨Ù† Ø³ÙŠØ±ÙŠÙ† ÙˆØ§Ù„Ù†Ø§Ø¨Ù„Ø³ÙŠØŒ Ù…Ø¹ Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø§Ù†ÙŠ Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© ÙˆØ§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©ØŒ
      Ø¯ÙˆÙ† Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ. Ø§Ø³ØªØ®Ø¯Ù… Ø£Ø³Ù„ÙˆØ¨Ø§Ù‹ Ø¹Ø±Ø¨ÙŠÙ‹Ø§ ÙØµÙŠØ­Ù‹Ø§ØŒ ÙˆØ§Ø³ØªØ´Ù‡Ø¯ Ø¨Ù…ÙØ§Ù‡ÙŠÙ… Ø¹Ø§Ù…Ø© Ù…Ù† Ø§Ù„ØªØ±Ø§Ø« Ø¯ÙˆÙ† Ø°ÙƒØ± Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø¤Ù„ÙÙŠÙ† ØµØ±Ø§Ø­Ø©.
      Ø§Ù„Ø­Ù„Ù…: "${userInput}"
      ØªÙØ³ÙŠØ±: 
      `;

      try {
        const interpretation = await fetchInterpretation(prompt);

        // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
        loader.remove();
        resTitle.textContent = "ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù… ÙƒÙ…Ø§ ÙˆØ±Ø¯ ÙÙŠ Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„ØªØ±Ø§Ø«ÙŠØ©";
        resTitle.style.display = 'block';
        resMeta.textContent = `Ø§Ù„Ù…ØµØ¯Ø±: Ø§Ø¨Ù† Ø³ÙŠØ±ÙŠÙ† ÙˆØ§Ù„Ù†Ø§Ø¨Ù„Ø³ÙŠ (Ø£Ø³Ù„ÙˆØ¨ Ø£Ø¯Ø¨ÙŠ).`;
        resMeta.style.display = 'block';
        resBody.innerHTML = interpretation;
        resBody.style.display = 'block';
        statusEl.textContent = 'ØªÙ…Øª Ø§Ù„ØªÙØ³ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­.';
      } catch (err) {
        loader.remove();
        statusEl.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙØ³ÙŠØ±. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
        console.error(err);
        alert('ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªÙØ³ÙŠØ±: ' + err.message);
      }
    }

    // Ø£Ø­Ø¯Ø§Ø«
    btn.addEventListener('click', handleInfer);
    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        handleInfer();
      }
    });

  </script>
</body>
</html>
