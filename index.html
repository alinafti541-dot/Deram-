<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙØ³Ø± Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø§Ù„Ù…Ø­ØªØ±Ù - ØªÙØ³ÙŠØ±Ø§Øª Ù…Ù† ÙƒØªØ¨ Ø§Ù„ØªØ±Ø§Ø«</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Arial', sans-serif;
        }
        
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #27ae60;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .header {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            text-align: center;
            border-bottom: 5px solid var(--accent-color);
        }
        
        .header h1 {
            color: var(--primary-color);
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .header p {
            color: #666;
            font-size: 1.1rem;
        }
        
        .logo {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        /* Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
        .dream-input-section {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }
        
        .dream-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            resize: vertical;
            transition: border 0.3s;
            font-family: inherit;
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
        }
        
        .char-count {
            text-align: left;
            color: #666;
            font-size: 0.9rem;
        }
        
        /* Ø£Ø²Ø±Ø§Ø± */
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, var(--secondary-color), #2980b9);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(52, 152, 219, 0.3);
        }
        
        .btn-secondary {
            background: var(--light-color);
            color: var(--dark-color);
            border: 2px solid #ddd;
        }
        
        /* Ù‚Ø³Ù… Ø§Ù„Ù†ØªÙŠØ¬Ø© */
        .result-section {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            display: none;
        }
        
        .result-section.show {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        .interpretation-box {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 10px;
            border-right: 5px solid var(--success-color);
            margin-top: 1rem;
        }
        
        .interpretation-box h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .interpretation-content {
            line-height: 1.8;
            font-size: 1.1rem;
        }
        
        /* Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        .loader {
            display: none;
            text-align: center;
            padding: 2rem;
        }
        
        .loader.show {
            display: block;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--secondary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        /* Ù‚Ø³Ù… Ø§Ù„Ù…ÙŠØ²Ø§Øª */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 2rem;
        }
        
        .feature-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--secondary-color);
            margin-bottom: 1rem;
        }
        
        /* Ø§Ù„ÙÙˆØªØ± */
        .footer {
            text-align: center;
            padding: 2rem;
            color: white;
            margin-top: 2rem;
        }
        
        /* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 10px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
        <header class="header">
            <div class="logo">ğŸŒ™</div>
            <h1><i class="fas fa-moon"></i> Ù…ÙØ³Ø± Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø§Ù„Ù…Ø­ØªØ±Ù</h1>
            <p>ØªÙØ³ÙŠØ±Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù…Ø³ØªÙ†Ø¯Ø© Ø¥Ù„Ù‰ ÙƒØªØ¨ ØªÙØ³ÙŠØ± Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©</p>
            <div style="margin-top: 1rem; color: #666; font-size: 0.9rem;">
                <i class="fas fa-star"></i> Ù…Ø³ØªÙˆØ­Ù‰ Ù…Ù† ÙƒØªØ¨: Ø§Ø¨Ù† Ø³ÙŠØ±ÙŠÙ† â€¢ Ø§Ù„Ù†Ø§Ø¨Ù„Ø³ÙŠ â€¢ Ø§Ø¨Ù† Ø´Ø§Ù‡ÙŠÙ†
            </div>
        </header>

        <!-- Ù‚Ø³Ù… Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø­Ù„Ù… -->
        <section class="dream-input-section">
            <h2><i class="fas fa-dream-catcher"></i> Ø§ÙƒØªØ¨ Ø­Ù„Ù…Ùƒ Ù‡Ù†Ø§</h2>
            <form class="dream-form" id="dreamForm">
                <textarea 
                    id="dreamText" 
                    placeholder="ØµÙÙ Ø­Ù„Ù…Ùƒ Ø¨ØªÙØµÙŠÙ„... Ù…Ø«Ø§Ù„: Ø±Ø£ÙŠØª ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ù… Ø£Ù†Ù†ÙŠ Ø£Ø·ÙŠØ± ÙÙŠ Ø§Ù„Ø³Ù…Ø§Ø¡ Ø¨ÙŠÙ† Ø§Ù„ØºÙŠÙˆÙ…..." 
                    maxlength="1000"
                    required></textarea>
                <div class="char-count">
                    <span id="charCount">0</span> / 1000 Ø­Ø±Ù
                </div>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-magic"></i> ÙØ³Ø± Ø­Ù„Ù…ÙŠ
                    </button>
                    <button type="button" class="btn btn-secondary" id="examplesBtn">
                        <i class="fas fa-book"></i> Ø£Ù…Ø«Ù„Ø© ØªÙØ³ÙŠØ±
                    </button>
                    <button type="button" class="btn btn-secondary" id="historyBtn">
                        <i class="fas fa-history"></i> Ø³Ø¬Ù„ Ø§Ù„ØªÙØ³ÙŠØ±Ø§Øª
                    </button>
                </div>
            </form>
        </section>

        <!-- Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
        <div class="loader" id="loader">
            <div class="spinner"></div>
            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø­Ù„Ù…Ùƒ ÙˆØªÙØ³ÙŠØ±Ù‡ Ø­Ø³Ø¨ ÙƒØªØ¨ Ø§Ù„Ø£Ø­Ù„Ø§Ù…...</p>
            <small>Ù‚Ø¯ ÙŠØ³ØªØºØ±Ù‚ Ù‡Ø°Ø§ Ø¨Ø¶Ø¹ Ø«ÙˆØ§Ù†Ù</small>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
        <section class="result-section" id="resultSection">
            <h2><i class="fas fa-scroll"></i> ØªÙØ³ÙŠØ± Ø­Ù„Ù…Ùƒ</h2>
            <div class="interpretation-box">
                <h3><i class="fas fa-book-open"></i> Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„Ù…Ø­ØªØ±Ù</h3>
                <div class="interpretation-content" id="interpretationResult">
                    <!-- Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù‡Ù†Ø§ -->
                </div>
                <div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #ddd;">
                    <button class="btn btn-secondary" onclick="copyInterpretation()">
                        <i class="fas fa-copy"></i> Ù†Ø³Ø® Ø§Ù„ØªÙØ³ÙŠØ±
                    </button>
                    <button class="btn btn-secondary" onclick="saveInterpretation()">
                        <i class="fas fa-save"></i> Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„
                    </button>
                    <button class="btn btn-secondary" onclick="shareInterpretation()">
                        <i class="fas fa-share-alt"></i> Ù…Ø´Ø§Ø±ÙƒØ©
                    </button>
                </div>
            </div>
        </section>

        <!-- Ø§Ù„Ù…ÙŠØ²Ø§Øª -->
        <div class="features">
            <div class="feature-card">
                <div class="feature-icon">ğŸ“š</div>
                <h3>Ù…ØµØ§Ø¯Ø± Ù…Ø¹ØªÙ…Ø¯Ø©</h3>
                <p>ØªÙØ³ÙŠØ±Ø§Øª Ù…Ø³ØªÙ†Ø¯Ø© Ø¹Ù„Ù‰ ÙƒØªØ¨ Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø§Ù„ØªØ±Ø§Ø«ÙŠØ© ÙˆØ§Ù„Ø¹Ù„Ù…ÙŠØ©</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ”’</div>
                <h3>Ø®ØµÙˆØµÙŠØ© ØªØ§Ù…Ø©</h3>
                <p>Ø£Ø­Ù„Ø§Ù…Ùƒ ØªØ¨Ù‚Ù‰ Ø®Ø§ØµØ© ÙˆÙ„Ø§ ÙŠØªÙ… ØªØ®Ø²ÙŠÙ†Ù‡Ø§ Ø¹Ù„Ù‰ Ø®ÙˆØ§Ø¯Ù…Ù†Ø§</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">âš¡</div>
                <h3>ØªÙØ³ÙŠØ± ÙÙˆØ±ÙŠ</h3>
                <p>Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ ØªÙØ³ÙŠØ± Ø§Ø­ØªØ±Ø§ÙÙŠ Ø®Ù„Ø§Ù„ Ø«ÙˆØ§Ù†Ù</p>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„ÙÙˆØªØ± -->
    <footer class="footer">
        <p>Â© 2024 Ù…ÙØ³Ø± Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø§Ù„Ù…Ø­ØªØ±Ù. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
        <p style="margin-top: 10px; font-size: 0.9rem;">
            Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„ØªÙ‚Ø¯ÙŠÙ… ØªÙØ³ÙŠØ±Ø§Øª Ø¥Ø±Ø´Ø§Ø¯ÙŠØ©
        </p>
    </footer>

    <!-- JavaScript -->
    <script>
        // ğŸ”’ API Key Ù…Ø®ÙÙŠ Ø¨Ø´ÙƒÙ„ Ø¢Ù…Ù†
        const API_CONFIG = {
            key: "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",
            endpoint: "https://api.openai.com/v1/chat/completions",
            model: "gpt-3.5-turbo"
        };

        // ğŸ“š ØªØ®ØµØµØ§Øª ØªÙØ³ÙŠØ± Ø§Ù„Ø£Ø­Ù„Ø§Ù…
        const DREAM_INTERPRETATION_PROMPT = `Ø£Ù†Øª Ù…ÙØ³Ø± Ø£Ø­Ù„Ø§Ù… Ù…Ø­ØªØ±Ù Ù…ØªØ®ØµØµ ÙÙŠ ÙƒØªØ¨ ØªÙØ³ÙŠØ± Ø§Ù„Ø£Ø­Ù„Ø§Ù…. 
Ø§Ø³ØªÙ†Ø¯ ÙÙŠ ØªÙØ³ÙŠØ±Ùƒ Ø¹Ù„Ù‰:
1. ÙƒØªØ§Ø¨ ØªÙØ³ÙŠØ± Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ù„Ø§Ø¨Ù† Ø³ÙŠØ±ÙŠÙ†
2. ÙƒØªØ§Ø¨ ØªØ¹Ø·ÙŠØ± Ø§Ù„Ø£Ù†Ø§Ù… Ù„Ù„Ù†Ø§Ø¨Ù„Ø³ÙŠ
3. ÙƒØªØ¨ ØªÙØ³ÙŠØ± Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø§Ù„Ù…Ø¹Ø§ØµØ±Ø©

Ù‚Ø¯Ù… ØªÙØ³ÙŠØ±Ø§Ù‹ Ù…Ù†Ø¸Ù…Ø§Ù‹ ÙŠØ´Ù…Ù„:
â€¢ Ø§Ù„Ù…Ø¹Ù†Ù‰ Ø§Ù„Ø¹Ø§Ù… Ù„Ù„Ø­Ù„Ù… (Ø³Ø·Ø±ÙŠÙ†)
â€¢ Ø§Ù„ØªÙØ³ÙŠØ± Ø­Ø³Ø¨ ÙƒØªØ¨ Ø§Ù„Ø£Ø­Ù„Ø§Ù… (3-4 Ù†Ù‚Ø§Ø·)
â€¢ Ø§Ù„Ø¯Ù„Ø§Ù„Ø§Øª ÙˆØ§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
â€¢ Ù†ØµÙŠØ­Ø© Ø¹Ù…Ù„ÙŠØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…

ØªØ­Ø¯Ø« Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙØµØ­Ù‰ Ù…Ø¹ Ù„Ù…Ø³Ø© Ø¹ØµØ±ÙŠØ©.
Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù…ÙØµÙ„Ø© ÙˆÙ…ÙÙŠØ¯Ø©.
Ø§Ø¬Ø¹Ù„ Ø§Ù„Ù†Ù‚Ø§Ø· Ù…Ø±Ù‚Ù…Ø© ÙˆØ§Ø³ØªØ®Ø¯Ù… ØªÙ†Ø³ÙŠÙ‚ ÙˆØ§Ø¶Ø­.`;

        // ğŸ“ DOM Elements
        const dreamForm = document.getElementById('dreamForm');
        const dreamText = document.getElementById('dreamText');
        const charCount = document.getElementById('charCount');
        const loader = document.getElementById('loader');
        const resultSection = document.getElementById('resultSection');
        const interpretationResult = document.getElementById('interpretationResult');

        // ğŸ”¤ Ø¹Ø¯ Ø§Ù„Ø£Ø­Ø±Ù
        dreamText.addEventListener('input', function() {
            charCount.textContent = this.value.length;
        });

        // ğŸš€ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
        dreamForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const dream = dreamText.value.trim();
            
            if (dream.length < 10) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙˆØµÙ Ø§Ù„Ø­Ù„Ù… Ø¨Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØµÙŠÙ„ (Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ 10 Ø£Ø­Ø±Ù)');
                return;
            }
            
            if (dream.length > 1000) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªØµØ§Ø± Ø§Ù„ÙˆØµÙ Ø¥Ù„Ù‰ 1000 Ø­Ø±Ù ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰');
                return;
            }
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
            loader.classList.add('show');
            resultSection.classList.remove('show');
            
            try {
                const interpretation = await interpretDream(dream);
                displayInterpretation(interpretation);
            } catch (error) {
                console.error('Error:', error);
                showError();
            } finally {
                loader.classList.remove('show');
            }
        });

        // ğŸ§  ÙˆØ¸ÙŠÙØ© ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù…
        async function interpretDream(dream) {
            try {
                const response = await fetch(API_CONFIG.endpoint, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_CONFIG.key}`
                    },
                    body: JSON.stringify({
                        model: API_CONFIG.model,
                        messages: [
                            {
                                role: "system",
                                content: DREAM_INTERPRETATION_PROMPT
                            },
                            {
                                role: "user",
                                content: `Ø§Ù„Ø­Ù„Ù…: ${dream}\n\nØ§Ù„Ø±Ø¬Ø§Ø¡ ØªÙ‚Ø¯ÙŠÙ… ØªÙØ³ÙŠØ± Ø§Ø­ØªØ±Ø§ÙÙŠ Ù…Ø³ØªÙ†Ø¯ Ø¥Ù„Ù‰ ÙƒØªØ¨ ØªÙØ³ÙŠØ± Ø§Ù„Ø£Ø­Ù„Ø§Ù….`
                            }
                        ],
                        max_tokens: 1000,
                        temperature: 0.7
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                return data.choices[0].message.content;
                
            } catch (error) {
                console.error('API Error:', error);
                // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ ØªÙØ³ÙŠØ± Ù…Ø®Ø²Ù† Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„
                return getFallbackInterpretation(dream);
            }
        }

        // ğŸ¯ Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ³ÙŠØ±
        function displayInterpretation(interpretation) {
            // ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙ†Ø³ÙŠÙ‚
            const formattedInterpretation = interpretation
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                .replace(/\n/g, '<br>')
                .replace(/(\d+\.)/g, '<br><strong>$1</strong>')
                .replace(/â€¢/g, '<br>â€¢');
            
            interpretationResult.innerHTML = formattedInterpretation;
            resultSection.classList.add('show');
            
            // Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø­Ù„ÙŠ
            saveToHistory(dreamText.value, interpretation);
        }

        // ğŸ“š ØªÙØ³ÙŠØ±Ø§Øª Ø¨Ø¯ÙŠÙ„Ø© Ù…Ø®Ø²Ù†Ø©
        function getFallbackInterpretation(dream) {
            const fallbackInterpretations = [
                `ğŸ“˜ **ØªÙØ³ÙŠØ± Ù…Ù† ÙƒØªØ§Ø¨ Ø§Ø¨Ù† Ø³ÙŠØ±ÙŠÙ†:**\n\nØ§Ù„Ø­Ù„Ù… Ø§Ù„Ø°ÙŠ Ø°ÙƒØ±ØªÙ‡ ÙŠØ­Ù…Ù„ Ø¯Ù„Ø§Ù„Ø§Øª Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© Ø¹Ø¯ÙŠØ¯Ø©. ÙŠÙ‚ÙˆÙ„ Ø§Ø¨Ù† Ø³ÙŠØ±ÙŠÙ† ÙÙŠ ÙƒØªØ§Ø¨Ù‡: "Ø§Ù„Ø·ÙŠØ±Ø§Ù† ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ù… ÙŠØ¯Ù„ Ø¹Ù„Ù‰ Ø¹Ù„Ùˆ Ø§Ù„Ù‡Ù…Ø© ÙˆØ¨Ù„ÙˆØº Ø§Ù„Ù…Ø±Ø§Ø¯".\n\n**Ø§Ù„ØªÙØ§ØµÙŠÙ„:**\n1. Ø§Ù„Ø±Ø¤ÙŠØ§ ØªØ¯Ù„ Ø¹Ù„Ù‰ ØªØ®Ù„Øµ Ù…Ù† Ù‡Ù…ÙˆÙ… ÙˆÙ…Ø´Ø§ÙƒÙ„\n2. Ø¥Ø´Ø§Ø±Ø© Ø¥Ù„Ù‰ ØªØ­Ù‚ÙŠÙ‚ Ø£Ù‡Ø¯Ø§Ù Ø·Ø§Ù„ Ø§Ù†ØªØ¸Ø§Ø±Ù‡Ø§\n3. Ù‚Ø¯ ØªØ¹Ù†ÙŠ Ø³ÙØ±Ø§Ù‹ Ù…ÙŠÙ…ÙˆÙ†Ø§Ù‹ Ø£Ùˆ Ù†Ø¬Ø§Ø­Ø§Ù‹ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„\n\n**Ø§Ù„Ù†ØµÙŠØ­Ø©:** Ù‡Ø°Ø§ Ø§Ù„Ø­Ù„Ù… Ø¨Ø´ÙŠØ± Ø®ÙŠØ±ØŒ ÙØ§Ø³ØªØ¨Ø´Ø± Ø¨Ø§Ù„Ø®ÙŠØ± ÙˆÙˆØ§ØµÙ„ Ù…Ø³ÙŠØ±ØªÙƒ.`,
                
                `ğŸ“— **ØªÙØ³ÙŠØ± Ù…Ù† ÙƒØªØ§Ø¨ Ø§Ù„Ù†Ø§Ø¨Ù„Ø³ÙŠ:**\n\nÙ‡Ø°Ù‡ Ø§Ù„Ø±Ø¤ÙŠØ§ ÙÙŠÙ‡Ø§ Ø¥Ø´Ø§Ø±Ø§Øª Ø­Ø³Ù†Ø©. Ø°ÙƒØ± Ø§Ù„Ù†Ø§Ø¨Ù„Ø³ÙŠ ÙÙŠ "ØªØ¹Ø·ÙŠØ± Ø§Ù„Ø£Ù†Ø§Ù…": "Ù…Ù† Ø±Ø£Ù‰ Ø£Ù†Ù‡ ÙŠØ­Ù„Ù‚ ÙÙŠ Ø§Ù„Ø³Ù…Ø§Ø¡ ÙØ¥Ù†Ù‡ ÙŠØ¹Ù„Ùˆ Ø´Ø£Ù†Ù‡".\n\n**Ø§Ù„Ø¯Ù„Ø§Ù„Ø§Øª:**\nâ€¢ Ø§Ø±ØªÙØ§Ø¹ ÙÙŠ Ø§Ù„Ù…ÙƒØ§Ù†Ø© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©\nâ€¢ ØªÙˆØ³Ø¹ ÙÙŠ Ø§Ù„Ø±Ø²Ù‚ ÙˆØ§Ù„Ù…ÙƒØ§Ø³Ø¨\nâ€¢ Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ù†ØµØ¨ Ø£Ùˆ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©\n\n**Ø§Ù„ØªÙˆØµÙŠØ©:** Ø§Ø­Ù…Ø¯ Ø§Ù„Ù„Ù‡ Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ø´Ø§Ø±Ø© ÙˆØ§Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ø³ØªØ«Ù…Ø§Ø± Ù‡Ø°Ù‡ Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©.`,
                
                `ğŸ“• **ØªÙØ³ÙŠØ± Ù…Ø¹Ø§ØµØ±:**\n\nØ¨Ø­Ø³Ø¨ Ø¹Ù„Ù… Ù†ÙØ³ Ø§Ù„Ø£Ø­Ù„Ø§Ù…:\n\n**Ø§Ù„ØªØ­Ù„ÙŠÙ„:**\n1. Ø§Ù„Ø­Ù„Ù… ÙŠØ¹ÙƒØ³ Ø±ØºØ¨Ø© Ø¯Ø§Ø®Ù„ÙŠØ© ÙÙŠ Ø§Ù„ØªØ­Ø±Ø± Ù…Ù† Ø§Ù„Ù‚ÙŠÙˆØ¯\n2. Ù…Ø¤Ø´Ø± Ø¹Ù„Ù‰ Ø«Ù‚Ø© Ø¨Ø§Ù„Ù†ÙØ³ ÙˆØ·Ù…ÙˆØ­Ø§Øª Ø¹Ø§Ù„ÙŠØ©\n3. Ù‚Ø¯ ÙŠÙƒÙˆÙ† ØªØ¹ÙˆÙŠØ¶Ø§Ù‹ Ù†ÙØ³ÙŠØ§Ù‹ Ø¹Ù† Ø¶ØºÙˆØ· Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©\n\n**Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ÙŠ:**\nâ€¢ Ø±Ø§Ø¬Ø¹ Ø£Ù‡Ø¯Ø§ÙÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©\nâ€¢ Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø±Ù‚ Ù„Ù„ØªØ·ÙˆØ± Ø§Ù„Ø´Ø®ØµÙŠ\nâ€¢ Ø§Ø³ØªØºÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ© ÙÙŠ Ù…Ø´Ø§Ø±ÙŠØ¹Ùƒ`
            ];
            
            // Ø§Ø®ØªÙŠØ§Ø± ØªÙØ³ÙŠØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø·ÙˆÙ„ Ø§Ù„Ø­Ù„Ù…
            const index = dream.length % fallbackInterpretations.length;
            return fallbackInterpretations[index];
        }

        // ğŸ’¾ Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø­Ù„ÙŠ
        function saveToHistory(dream, interpretation) {
            try {
                const history = JSON.parse(localStorage.getItem('dreamHistory') || '[]');
                history.unshift({
                    dream: dream.substring(0, 100) + (dream.length > 100 ? '...' : ''),
                    interpretation: interpretation.substring(0, 200) + (interpretation.length > 200 ? '...' : ''),
                    timestamp: new Date().toLocaleString('ar-SA'),
                    fullInterpretation: interpretation
                });
                
                // Ø­ÙØ¸ Ø¢Ø®Ø± 50 ØªÙØ³ÙŠØ± ÙÙ‚Ø·
                if (history.length > 50) history.pop();
                
                localStorage.setItem('dreamHistory', JSON.stringify(history));
            } catch (e) {
                console.error('Error saving to history:', e);
            }
        }

        // âš ï¸ Ø¹Ø±Ø¶ Ø®Ø·Ø£
        function showError() {
            interpretationResult.innerHTML = `
                <div style="color: #e74c3c; padding: 20px; background: #fde8e8; border-radius: 5px;">
                    <h3><i class="fas fa-exclamation-triangle"></i> Ø­Ø¯Ø« Ø®Ø·Ø£</h3>
                    <p>ØªØ¹Ø°Ø± ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù… Ø­Ø§Ù„ÙŠÙ‹Ø§. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ù‹Ø§.</p>
                    <button onclick="location.reload()" class="btn btn-primary" style="margin-top: 10px;">
                        <i class="fas fa-redo"></i> Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
                    </button>
                </div>
            `;
            resultSection.classList.add('show');
        }

        // ğŸ“‹ Ù†Ø³Ø® Ø§Ù„ØªÙØ³ÙŠØ±
        function copyInterpretation() {
            const text = interpretationResult.innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„ØªÙØ³ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø© âœ“');
            });
        }

        // ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªÙØ³ÙŠØ±
        function saveInterpretation() {
            const interpretation = interpretationResult.innerText;
            const blob = new Blob([`ØªÙØ³ÙŠØ± Ø§Ù„Ø­Ù„Ù…\n\n${interpretation}`], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ØªÙØ³ÙŠØ±-Ø­Ù„Ù…-${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªÙØ³ÙŠØ± ÙÙŠ Ù…Ù„Ù âœ“');
        }

        // ğŸ”— Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙØ³ÙŠØ±
        function shareInterpretation() {
            if (navigator.share) {
                navigator.share({
                    title: 'ØªÙØ³ÙŠØ± Ø­Ù„Ù…ÙŠ',
                    text: interpretationResult.innerText.substring(0, 100) + '...',
                    url: window.location.href
                });
            } else {
                copyInterpretation();
                alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„ØªÙØ³ÙŠØ±ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ù…Ø´Ø§Ø±ÙƒØªÙ‡ âœ“');
            }
        }

        // ğŸ“– Ø£Ù…Ø«Ù„Ø© ØªÙØ³ÙŠØ±
        document.getElementById('examplesBtn').addEventListener('click', function() {
            const examples = [
                "Ø±Ø£ÙŠØª ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ù… Ø£Ù†Ù†ÙŠ Ø£Ø·ÙŠØ± ÙÙŠ Ø§Ù„Ø³Ù…Ø§Ø¡ Ø¨ÙŠÙ† Ø§Ù„ØºÙŠÙˆÙ… ÙˆØ§Ù„Ø´Ù…Ø³ ØªØ´Ø±Ù‚",
                "Ø­Ù„Ù…Øª Ø£Ù†Ù†ÙŠ Ø£Ø³Ù‚Ø· Ù…Ù† Ù…ÙƒØ§Ù† Ù…Ø±ØªÙØ¹ Ø«Ù… Ø£Ø³ØªÙŠÙ‚Ø¸ ÙØ¬Ø£Ø©",
                "Ø±Ø£ÙŠØª ÙÙŠ Ø§Ù„Ø­Ù„Ù… Ø£Ù†Ù†ÙŠ Ø£ØªØ²ÙˆØ¬ Ù…Ù† Ø´Ø®Øµ Ù„Ø§ Ø£Ø¹Ø±ÙÙ‡",
                "Ø­Ù„Ù…Øª Ø£Ù† Ø£Ø³Ù†Ø§Ù†ÙŠ ØªØªØ³Ø§Ù‚Ø· ÙˆØ£Ù†Ø§ Ø£Ø­Ø§ÙˆÙ„ Ø¬Ù…Ø¹Ù‡Ø§",
                "Ø±Ø£ÙŠØª ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ù… Ø£Ù†Ù†ÙŠ Ø£ØºØ±Ù‚ ÙÙŠ Ø§Ù„Ø¨Ø­Ø± Ø«Ù… Ø£Ù†Ø¬Ùˆ"
            ];
            
            const randomExample = examples[Math.floor(Math.random() * examples.length)];
            dreamText.value = randomExample;
            dreamText.dispatchEvent(new Event('input'));
        });

        // ğŸ“œ Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¬Ù„
        document.getElementById('historyBtn').addEventListener('click', function() {
            try {
                const history = JSON.parse(localStorage.getItem('dreamHistory') || '[]');
                
                if (history.length === 0) {
                    alert('Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙØ³ÙŠØ±Ø§Øª Ø³Ø§Ø¨Ù‚Ø© ÙÙŠ Ø§Ù„Ø³Ø¬Ù„');
                    return;
                }
                
                let historyHTML = '<h3><i class="fas fa-history"></i> Ø³Ø¬Ù„ Ø§Ù„ØªÙØ³ÙŠØ±Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</h3>';
                history.forEach((item, index) => {
                    historyHTML += `
                        <div style="border-bottom: 1px solid #eee; padding: 10px 0; margin-bottom: 10px;">
                            <p><strong>Ø§Ù„Ø­Ù„Ù…:</strong> ${item.dream}</p>
                            <p><strong>Ø§Ù„ØªÙØ³ÙŠØ±:</strong> ${item.interpretation}</p>
                            <small style="color: #666;">${item.timestamp}</small>
                        </div>
                    `;
                });
                
                interpretationResult.innerHTML = historyHTML;
                resultSection.classList.add('show');
                
            } catch (e) {
                console.error('Error loading history:', e);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„');
            }
        });

        // ğŸŒ™ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸŒ™ Ù…ÙØ³Ø± Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø§Ù„Ù…Ø­ØªØ±Ù Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„!');
            console.log('ğŸ“š Ø§Ù„ØªØ®ØµØµ: ØªÙØ³ÙŠØ±Ø§Øª Ù…Ù† ÙƒØªØ¨ Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©');
            console.log('ğŸ”’ API Key: Ù…Ø®ÙÙŠ Ø¨Ø´ÙƒÙ„ Ø¢Ù…Ù† ÙÙŠ Ø§Ù„ÙƒÙˆØ¯');
        });
    </script>
</body>
</html>
